- 소개
	- 현재 위치를 기반으로 가까운 측정소의 정보를 불러와서 미세먼지 현황을 알려주는 앱입니다.

- 기능
	- 미세먼지도 알려주기
	- 위젯으로 알려주기

- 배우는 것
	- LocationManager
	- Fused Location Provider Client
	- 공공데이터 포털
	- App widget

---

- LocationManager
	- 타입에 따라 요청하는 방식이 다름, 포그라운드와 백그라운드
	- 포그라운드는 하던대로 하면 됨
	- 앱 위젯은 백그라운드 이므로 백그라운드 위치 권한도 추가해야함 

- Fused Location Provider Client
	- 위치 서비스 api 중 하나임
	- LocaionManager보다 권장하고 있음
	- 구글 플레이 서비스가 설치 되어 있는지 체크해줘야 되긴 함
	- 의존성 추가해!
	- 어떤 오류가 생긴 경우엔 널을 반환함

- 공공데이터 포털
	- 국가가 관리하는 사이트
	- data.go.kr 에서 많은 open API를 이용할 수 있음
	- 해당 프로젝트는 대기오염정보와 측정소정보를 가져올 예정
	- 젤 가까운 정보를 갖고오기 위해 측정소 정보 api를 가져옴
		- tm좌표를 쓰고 있어서 카카오 api를 사용해서 위경도를 tm좌표로 변경해야 한다는 불편함이 있음


- App widget
	- 위젯을 제공? 다루는? 방법엔 두가지가 있지만 하나만 다룰거임
	- 3가지 재료가 필요함
	- ProviderInfo
		- 앱 위젯에 대한 정보를 담은 xml 파일
		- 최상위 테그는 appwidget-provider
	- provider
		- 실제로 위젯을 제공하는 클래스
		- 갱신이나 여러 이벤트를 받아서 핸들링함
		- AppWidgetProvider 상속 받기
		- 여러 클래스를 오버라이드 할 수 있음
		- 매니페스트에 리시버로 등록 해야 함

	- 레이아웃
		- 위젯 어떻게 보여줄지 보여주는 레이아웃
		- 위젯은 리모트뷰 형식으로 제공되어야 함
	- 4.0 이상에 대해서는 패딩값을 신경 안써도 됨	
	- 디바이스마다 위젯이 보이는 모양이 다를 수 있음
	- 강의 찍는 당시엔 제약레이아웃을 쓰지 못함
	- 업데이트 시간을 지정해 줘야함
		- 30분 이하로는 못줌. 주고 싶으면 0으로 두고 알람매니저 사용
	- 위젯카테고리도 지정해줘야 함
	- 안드로이드는 백그라운드에서 위치에 접근하는걸 굉장히 싫어함
	- 따라서 이 앱에서는 포그라운드를 이용해서 접근 할 예정
	- 서비스로 위젯을 다루기 때문에 서비스에 대한 이해도 필요
	- 포그라운드 서비스를 이용하면 노티피케이션도 만들어야 함

---

- 더 구현해보고 싶은 것

---

- Tip
	- open API는 준수사항을 잘 읽고 사용해야 함
	- 코루틴이던 뭐던 해제할 수 있는건 onDestroy때 알아서 cancle 하자
	- enum class에 대해 잘 모르겠다.
	- textView 앞에 drwable 추가 하려면 app:drawableStartCompat 속성 찾아보기
	- textView 자동 크기 조정 : autoSizeTextType ?
	- 레이아웃 자체에 애니메이션을 줄 수 있다
		- 아래는 투명도로 예시
		- 레이아웃.animate().alpha(1F).start()
---

- 동작 화면

- ![KakaoTalk_20220721_175447331_23](https://user-images.githubusercontent.com/68932465/180650821-2c763d06-77f9-4b08-b5c4-cba03fcea50c.jpg)

